<div class="container-fluid posts-timeline-container p-5">
    <div class="row">
        <div class="offset-md-1 col-md-10">
            <div id="publications">
                <div class="post-container" *ngFor="let publication of publications">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="post-header-container">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <div class="avatar-profile pull-left">
                                                    <a >
                                                        <img src="{{url + 'get-image-user/' + publication.user.image}}" *ngIf="publication.user.image" />
                                                        <img src="assets/user.png" class="avatar-default" *ngIf="!publication.user.image" />
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="avatar-fullname pull-left">
                                                    <a  [routerLink]="['/perfil', publication.user._id]">
                                                        {{publication.user.name + ' '+ publication.user.surname}}
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        
            
                                        
                                    </div>
                                    <div class="col-md-6">
                                        <div class="float-end" *ngIf="publication.user._id == identity._id">
                                            <a href="#myModal{{publication._id}}" role="button" class="btn btn-large btn-danger" data-toggle="modal" *ngIf="showImage != publication._id">
                                                <span class="glyphicon glyphicon-trash"></span>
                                            </a>
                                            <div id="myModal{{publication._id}}" class="modal fade">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                            <h4 class="modal-title">¿Eliminar realmente la publicación?</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Si la borrás no podrás deshacer la operación.</p>
                                                            <!--<p>{{publication.text}}</p>-->
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                                                            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deletePublication(publication._id)">
                                                                Eliminar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            &nbsp;
                                        </div>
        
                                        <div class="float-end" *ngIf="publication.file != 'null'">
                                            <button class="btn btn-warning pull-right" (click)="showThisImage(publication._id)" *ngIf="showImage != publication._id">
                                                <span class="glyphicon glyphicon-picture"></span>
                                            </button>
                                            <button class="btn btn-danger pull-right" (click)="hideThisImage(publication._id)" *ngIf="showImage == publication._id">
                                                <span class="glyphicon glyphicon-remove-circle"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <h6 class="text">
                                    {{publication.text}}
                                </h6>

                            </div>
                            
                            <div class="post-content-container">
                                <div class="offset-md-3 col-md-6" *ngIf="publication?.file != 'null'">
                                    <img class="col-md-12" src="{{ url + 'get-image-pub/' + publication?.file }}"/>
                                </div>
                            </div>
                            
                            <div class="post-footer-container">
                                <div>

                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 text-center" *ngIf="publications && publications.length">
                <p>
                    <button class="btn btn-success" (click)="viewMore()" *ngIf="!noMore">
                        Ver más publicaciones
                    </button>
                </p>
            </div>
        </div>
    </div>
</div>


